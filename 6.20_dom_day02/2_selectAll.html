<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>全选和取消全选</title>
</head>
<body>
	<h2>管理员列表</h2>
	<table border="1px" width="500px">
	  <thead>
		<tr>
			<th><input type="checkbox"/>全选</th>
			<th>管理员ID</th>
			<th>姓名</th>
			<th>操作</th>
		</tr>
	  </thead>
	  <tbody>
	  	<tr>
	  		<td><input type="checkbox"/></td>
	  		<td>1</td>
	  		<td>Tester</td>
	  		<td>修改 删除</td>
	  	</tr>
	  	<tr>
	  		<td><input type="checkbox"/></td>
	  		<td>2</td>
	  		<td>Manager</td>
	  		<td>修改 删除</td>
	  	</tr>
	  	<tr>
	  		<td><input type="checkbox"/></td>
	  		<td>3</td>
	  		<td>Analyst</td>
	  		<td>修改 删除</td>
	  	</tr>
	  	<tr>
	  		<td><input type="checkbox"/></td>
	  		<td>4</td>
	  		<td>Admin</td>
	  		<td>修改 删除</td>
	  	</tr>
	  </tbody>
	</table>
	<button>删除选定</button>
  <script>
	(function(){
		// 点上边的全选，操作下边的所有checkbox
		//1.查找触发事件的元素
		var chbAll=document.querySelector('table>thead input');
		var chbs=document.querySelectorAll('table>tbody input');
		//2.绑定事件
		chbAll.onclick=function(){
			//3.查找要修改的元素
			// 4.修改元素
			for(var chb of chbs){
				chb.checked=chbAll.checked;
			};
		};
		// 点下边的每个chb，都可能影响上边的chb
		// 遍历并绑定单击事件
		for(var chb of chbs){
			chb.onclick=function(){
				// chb uncheck=> chbAll uncheck
				//chb check & 没有未被选中的chb=> chbAll check
				var chb=this;
				if(chb.checked==false){//取消选中，取消全选
					chbAll.checked=false;
				}else{//单击选中，如全部选中则全选
					var chb_unchecked=document.querySelector('table>tbody input:not(:checked)');
					if(chb_unchecked==null){
						chbAll.checked=true;
					};
				};

			};
		};
	})()
	</script>
</body>
</html>
